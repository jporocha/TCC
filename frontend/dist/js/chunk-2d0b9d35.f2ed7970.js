(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9d35"],{3530:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"schedule"},[a("h1",[t._v("Página para gerenciamento dos usuários")]),a("UserTable")],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{width:"100%"}},[a("v-card-title",{staticClass:"py-3 my-0"},[a("v-text-field",{staticClass:"white",staticStyle:{"max-width":"600px"},attrs:{outlined:"",dense:"","append-icon":"mdi-magnify",label:"Busca","hide-details":""},model:{value:t.busca,callback:function(e){t.busca=e},expression:"busca"}}),a("v-spacer"),a("v-btn",{staticClass:"my-2",attrs:{small:"",color:"app"},on:{click:t.createUser}},[t._v("Inserir cliente")])],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.usersHeader,items:t.users,search:t.busca,dense:"","item-key":"_id",loading:t.loading,"loading-text":"Carregando usuários...","no-data-text":"Não há usuários a exibir...","items-per-page":10,"footer-props":{"items-per-page-all-text":"Todos","items-per-page-text":"Usuários por página:","items-per-page-options":[5,10,15,-1]},"header-props":{"sort-by-text":"Organizar por"}},scopedSlots:t._u([{key:"item._id",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.convertToDate(a._id))+" ")]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return["admin"===o.role?a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.demoteUser(o)}}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:"",color:"red"}},[t._v("mdi-account-minus")])],1):t._e()]}}],null,!0)},[a("span",[t._v("Remover acesso")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return["cliente"===o.role?a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.editUser(o)}}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:"",color:"purple"}},[t._v("mdi-account-edit")])],1):t._e()]}}],null,!0)},[a("span",[t._v("Editar cliente")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return["cliente"===o.role?a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.createJob(o)}}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:"",color:"green"}},[t._v("mdi-folder-account")])],1):t._e()]}}],null,!0)},[a("span",[t._v("Novo projeto")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return["cliente"===o.role?a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.promoteUser(o)}}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:"",color:"blue"}},[t._v("mdi-account-star")])],1):t._e()]}}],null,!0)},[a("span",[t._v("Tornar administrador")])])]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(t._s(t.cardTitle))]),a("v-card-text",{staticClass:"text-justify"},[t._v(t._s(t.cardText))]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{small:"",color:"red"},on:{click:function(e){t.dialog=!1}}},[t._v("Cancelar")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"green"},on:{click:t.execAction}},[t._v("Confirmar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.userDialog,callback:function(e){t.userDialog=e},expression:"userDialog"}},[a("EditUser",{key:t.userKey,on:{close:t.closeUser}})],1)],1)},n=[],i=a("bc3a"),c=a.n(i),l=a("8329"),u={props:["admin"],components:{EditUser:l["a"]},computed:{usersHeader:function(){var t=[{text:"Nome",value:"name",sortable:!1},{text:"E-mail",value:"email",sortable:!1},{text:"Cadastro",value:"tipo",sortable:!1},{text:"Ações",value:"actions",sortable:!1,align:"center"}];return t}},data:function(){return{users:[],loading:!0,busca:"",userDialog:!1,userKey:Math.random()}},methods:{fetchUsers:function(){var t=this;c.a.get("/users").then((function(e){t.users=e.data,t.loading=!1})).catch((function(e){t.$root.vtoast.show({color:"orange",message:e.response.data,icon:"mdi-alert"}),t.loading=!1}))},closeUser:function(t){t&&this.fetchUsers(),this.userDialog=!1},editUser:function(t){this.user=t,this.userKey=t._id,this.userDialog=!0},createUser:function(){this.user=null,this.userKey=Math.random(),this.userDialog=!0}},mounted:function(){this.fetchUsers()}},d=u,v=a("2877"),p=a("6544"),m=a.n(p),b=a("8336"),f=a("b0af"),_=a("99d9"),g=a("8fea"),h=a("169a"),x=a("ce7e"),k=a("132d"),y=a("2fa4"),U=a("8654"),C=a("3a2f"),w=Object(v["a"])(d,s,n,!1,null,"36a95b1a",null),T=w.exports;m()(w,{VBtn:b["a"],VCard:f["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VDataTable:g["a"],VDialog:h["a"],VDivider:x["a"],VIcon:k["a"],VSpacer:y["a"],VTextField:U["a"],VTooltip:C["a"]});var V={components:{UserTable:T}},D=V,S=Object(v["a"])(D,o,r,!1,null,null,null);e["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d0b9d35.f2ed7970.js.map